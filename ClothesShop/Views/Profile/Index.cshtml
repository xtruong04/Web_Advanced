@model ProfileViewModel
<link rel="stylesheet" href="~/css/profile.css" />

<div class="container mt-5" style="padding-top:120px;">
    <div class="row">

        <!-- Sidebar -->
        <div class="col-md-3 mb-4">
            <div class="card shadow-sm rounded-4 p-3">
                <h5 class="fw-bold mb-3">Tài khoản</h5>

                <div class="list-group list-group-flush">
                    <a href="/Profile" class="list-group-item list-group-item-action active">Hồ sơ</a>
                    <a href="/Orders" class="list-group-item list-group-item-action">Đơn mua</a>
                    <a href="/Manage/ChangePassword" class="list-group-item list-group-item-action">Đổi mật khẩu</a>
                    <a href="/Address" class="list-group-item list-group-item-action">Sổ địa chỉ</a>
                    <a href="/Identity/Account/Logout" class="list-group-item list-group-item-action text-danger">Đăng xuất</a>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-9">
            <div class="card shadow-sm rounded-4 p-4">

                <h3 class="fw-bold mb-4">Hồ sơ cá nhân</h3>
                <hr />

                <!-- SUCCESS MESSAGE -->
                @if (TempData["success"] != null)
                {
                    <div class="alert alert-success alert-dismissible fade show">
                        @TempData["success"]
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                }

                <!-- Avatar + Name -->
                <div class="text-center mb-4">
                    <img src="/avatar/@Model.User.AvatarUrl"
                         class="rounded-circle border border-2"
                         style="width:130px; height:130px; object-fit:cover;" />

                    <h4 class="fw-bold mt-3">@Model.User.FullName</h4>
                    <p class="text-muted">(@Model.User.UserName)</p>
                </div>


                <!-- Thông tin tài khoản -->
                <div class="mb-4">
                    <h5 class="fw-bold mb-3">Thông tin cá nhân</h5>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="text-muted">Họ</label>
                            <div class="fw-semibold">@Model.User.FirstName</div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label class="text-muted">Tên</label>
                            <div class="fw-semibold">@Model.User.LastName</div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label class="text-muted">Ngày sinh</label>
                            <div class="fw-semibold">
                                @(Model.User.DateOfBirth?.ToString("dd/MM/yyyy")?? "—")
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label class="text-muted">Tuổi</label>
                            <div class="fw-semibold">
                                @(Model.User.Age?.ToString() ?? "—")
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Thông tin liên hệ -->
                <div class="mb-4">
                    <h5 class="fw-bold mb-3">Thông tin liên hệ</h5>

                    <div class="mb-3">
                        <label class="text-muted">Email</label>
                        <div class="fw-semibold">@Model.User.Email</div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="text-muted">Số điện thoại</label>
                        <div class="fw-semibold">@(Model.User.PhoneNumber ?? "—")</div>
                    </div>
                </div>


                <!-- Địa chỉ mặc định -->
                <div class="mb-4">
                    <h5 class="fw-bold mb-3">Địa chỉ mặc định</h5>

                    @if (Model.DefaultAddress != null)
                    {
                        <div class="border rounded-3 p-3 bg-light">
                            <div class="fw-semibold">Street: @Model.DefaultAddress.Street</div>
                            <div>Ward: @Model.DefaultAddress.Ward,Distric: @Model.DefaultAddress.District,City: @Model.DefaultAddress.City</div>
                        </div>
                    }
                    else
                    {
                        <p class="text-muted">Chưa có địa chỉ mặc định</p>
                    }

                    <a href="/Address" class="btn btn-outline-primary btn-sm mt-3">
                        Quản lý sổ địa chỉ
                    </a>
                </div>


                <!-- Update Button -->
                <div class="text-end mt-4">
                    <a href="/Profile/Edit" class="btn btn-primary px-4 fw-bold">Cập nhật hồ sơ</a>
                </div>

            </div>
        </div>

    </div>
</div>
